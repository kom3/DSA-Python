# ðŸ“Œ Inclusionâ€“Exclusion (Simple & Intuitive)

**Inclusionâ€“exclusion** is a way to:

> **Add what you want, subtract what you counted twice**

---

## 1ï¸âƒ£ The Core Problem

When you combine multiple overlapping areas:

* Some parts get **counted more than once**
* You must **subtract the overlap**

Thatâ€™s inclusionâ€“exclusion.

---

## 2ï¸âƒ£ 1D Example (Warm-up)

Array:

```
[1, 2, 3, 4, 5]
```

Prefix sum:

```
ps = [1, 3, 6, 10, 15]
```

Sum of range `[1, 3]`:

```
ps[3] - ps[0]
```

### Why subtraction?

* `ps[3]` includes `[0..3]`
* `ps[0]` removes `[0]`
* Whatâ€™s left is `[1..3]`

ðŸ‘‰ **Exclude what you donâ€™t want**

---

## 3ï¸âƒ£ 2D Inclusionâ€“Exclusion (Main Use Case)

### Goal

Find sum of submatrix:

```
(row1, col1) â†’ (row2, col2)
```

---

### Step-by-step Visualization

We want this area (ðŸŸ©):

```
+-----------+
| A | B     |
|---+-------|
| C | ðŸŸ©     |
+-----------+
```

---

### Step 1: Include big rectangle

```
ps[row2][col2]
```

Includes **A + B + C + ðŸŸ©**

---

### Step 2: Exclude top area

```
- ps[row1 - 1][col2]
```

Removes **A + B**

---

### Step 3: Exclude left area

```
- ps[row2][col1 - 1]
```

Removes **A + C**

---

### Step 4: Fix double exclusion

```
+ ps[row1 - 1][col1 - 1]
```

Area **A** was subtracted twice â†’ add it back once

---

### Final Formula

```
sum =
    ps[row2][col2]
  - ps[row1 - 1][col2]
  - ps[row2][col1 - 1]
  + ps[row1 - 1][col1 - 1]
```

---

## 4ï¸âƒ£ Why Itâ€™s Called Inclusionâ€“Exclusion

| Step          | Meaning              |
| ------------- | -------------------- |
| Include       | Add big region       |
| Exclude       | Remove extra regions |
| Include again | Fix double removal   |

---

## 5ï¸âƒ£ Why This Works EVERY TIME

Any overlapping area:

* Is added **twice**
* Removed **twice**
* Added back **once**

Net effect: counted **once**

---

## 6ï¸âƒ£ Clean Mental Formula ðŸ§ 

> **+ Total
> âˆ’ Top
> âˆ’ Left
>
> * Top-Left**

---

## 7ï¸âƒ£ Padding Version (Cleaner)

With padded prefix sum matrix:

```python
sum =
    ps[r2 + 1][c2 + 1]
  - ps[r1][c2 + 1]
  - ps[r2 + 1][c1]
  + ps[r1][c1]
```

Same logic â€” no edge checks.

---

## 8ï¸âƒ£ Where Else Inclusionâ€“Exclusion Appears

* Prefix sum (1D, 2D)
* Set theory
* Probability
* Counting overlapping intervals
* Area of overlapping rectangles

---

## ðŸ”‘ One-Line Definition (Interview Ready)

> **Inclusionâ€“exclusion is a technique where we add all required regions, subtract overlapping regions, and then add back the parts that were subtracted more than once.**

