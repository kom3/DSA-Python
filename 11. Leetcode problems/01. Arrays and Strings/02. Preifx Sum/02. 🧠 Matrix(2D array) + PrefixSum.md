
---

# ðŸ“Œ PREFIX SUMS & MATRIX PROBLEMS â€” QUICK REVISION NOTES

---

## 1ï¸âƒ£ Prefix Sum (1D) â€” Core Idea

**Definition**

```
prefix[i] = sum of elements from index 0 to i-1
prefix[0] = 0
```

**Subarray sum**

```
sum(j â†’ i-1) = prefix[i] - prefix[j]
```

**Length of subarray**

```
length = i - j
```

ðŸ”‘ `j` is the prefix **before** the subarray
ðŸ”‘ Actual subarray = `(j+1 ... i)`

---

## 2ï¸âƒ£ Why length is `i - j` (not i - (j-1))

* Prefix indices represent **gaps between elements**
* `j` is a **boundary**, not an element index
* Subarray starts at `j + 1`

```
| a | b | c | d |
0   1   2   3   4  â† prefix indices
```

Subarray between prefix 1 and 4:

```
length = 4 - 1 = 3
```

---

## 3ï¸âƒ£ Prefix Sum Patterns (1D)

### Subarray Sum = K

```
prefix[i] - prefix[j] = k
prefix[j] = prefix[i] - k
```

### Subarray Divisible by K

```
(prefix[i] - prefix[j]) % k = 0
prefix[i] % k == prefix[j] % k
```

### Hashmap Rule

* Store **earliest index** â†’ for max length
* Store **frequency** â†’ for counting subarrays

---

## 4ï¸âƒ£ Matrix Prefix Sum (Row-wise)

### Code

```python
for i in range(m):
    for j in range(1, n):
        matrix[i][j] += matrix[i][j-1]
```

### Meaning

```
matrix[i][j] = sum of row i from column 0 to j
```

Example:

```
Original row: [1, 2, 3, 4]
Prefix row:   [1, 3, 6, 10]
```

---

## 5ï¸âƒ£ Why Row-wise Prefix Sum?

It allows **O(1)** row segment sums:

```
sum of row i from column c1 to c2 =
matrix[i][c2] - matrix[i][c1 - 1]
```

If `c1 == 0`:

```
sum = matrix[i][c2]
```

---

## 6ï¸âƒ£ Key Line Explained

```python
row_sum = matrix[row][c2] - matrix[row][c1 - 1]
```

Meaning:

> Sum of elements in **one row**, between columns `c1` and `c2` (inclusive)

This is the **bridge** from 2D â†’ 1D.

---

## 7ï¸âƒ£ Matrix â†’ 1D Compression Pattern (VERY IMPORTANT)

### Steps

1. Fix two columns `c1`, `c2`
2. For each row:

   ```
   row_sum[row] = sum of elements between c1 and c2
   ```
3. Now you have a **1D array**
4. Apply **prefix sum + hashmap**

ðŸ’¡ This is how **1074** works.

---

## 8ï¸âƒ£ Full Pattern for Submatrix Sum Problems

```
2D matrix
   â†“
Row-wise prefix sum
   â†“
Fix column pairs (c1, c2)
   â†“
Compress rows â†’ 1D array
   â†“
Prefix sum + hashmap
```

---

## 9ï¸âƒ£ Time Complexity Cheat Sheet

| Problem Type          | Time       |
| --------------------- | ---------- |
| Brute force submatrix | O(mÂ² Â· nÂ²) |
| Row compression       | O(nÂ² Â· m)  |
| Prefix + hashmap      | O(n)       |

---

## ðŸ”Ÿ Common Confusions (Cleared)

### âŒ Why not i - (j - 1)?

Because:

* `j` is **prefix index**
* Subarray starts at `j + 1`
* Length = `i - j`

### âŒ Why subtract `c1 - 1`?

Because:

* `matrix[row][c2]` includes everything from column 0
* Subtract unwanted left part

---

## ðŸ§  Memory Hooks (Interview Gold)

* **Prefix sum = boundary between elements**
* **Same prefix â†’ zero difference**
* **Same remainder â†’ divisible**
* **Matrix problems = compress â†’ solve as 1D**
* **j is before subarray, not inside it**

---

## ðŸ§¾ Problems Covered by This Pattern

âœ” 525 â€“ Contiguous Array
âœ” 560 â€“ Subarray Sum Equals K
âœ” 930 â€“ Binary Subarrays With Sum
âœ” 974 â€“ Subarray Sums Divisible by K
âœ” 1074 â€“ Number of Submatrices That Sum to Target

---

## âœ… One-line Master Takeaway

> **Matrix subarray problems are just 1D prefix-sum problems in disguise.**

---